{% extends "college_admin/base/base_dashboard.html" %}
{% load static %}
{% block title %}Analytics{% endblock %}

{% block content %}
<header class="top-bar">
    <h1>Analytics Overview</h1>
</header>

<div class="analytics-grid"
    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px;">

    <!-- Chart 1: Events -->
    <div class="card" style="min-height: 400px;">
        <div class="card-header">
            <h3><i class="fas fa-trophy"></i> Top Events</h3>
        </div>
        <div style="position: relative; height: 300px; width: 100%;">
            <canvas id="topEventsChart"></canvas>
        </div>
    </div>

    <!-- Chart 2: Departments -->
    <div class="card" style="min-height: 400px;">
        <div class="card-header">
            <h3><i class="fas fa-building"></i> Registrations by Department</h3>
        </div>
        <div style="position: relative; height: 300px; width: 100%;">
            <canvas id="deptShareChart"></canvas>
        </div>
    </div>

</div>

<!-- Data Passing -->
{{ event_labels|json_script:"eventLabels" }}
{{ event_data|json_script:"eventData" }}
{{ dept_labels|json_script:"deptLabels" }}
{{ dept_data|json_script:"deptData" }}

{% endblock %}

{% block extra_js %}
<script src="{% static 'college_admin/js/analytics_charts.js' %}"></script>
{% endblock %}